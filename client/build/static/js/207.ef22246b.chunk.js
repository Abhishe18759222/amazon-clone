"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[207],{7861:(t,e,r)=>{r.d(e,{$q:()=>d,XF:()=>c,_R:()=>s,dv:()=>a,ts:()=>i});var n=r(5280);const o="".concat(n.yK,"/cart"),a=async()=>{try{const t=await fetch("".concat(o,"/getcart"),{method:"GET",headers:{"Content-Type":"application/json",authtoken:localStorage.getItem("authtoken")}});if(!t.ok)throw new Error("Failed to fetch cart");return await t.json()}catch(t){return console.error("Error during cart data fetch:",t),{status:"error",message:"Something went wrong!"}}},s=async(t,e)=>{try{const r=await fetch("".concat(o,"/postcart"),{method:"POST",headers:{"Content-Type":"application/json",authtoken:localStorage.getItem("authtoken")},body:JSON.stringify({product_id:t,quantity:e})});if(!r.ok)throw new Error("Failed to add item to cart");return"success"===(await r.json()).status?{status:"success",message:"Item added to cart successfully"}:{status:"error",message:"Error adding item to cart"}}catch(r){return console.error("Error during item addition to cart:",r),{status:"error",message:"Something went wrong!"}}},c=async t=>{try{const e=await fetch("".concat(o,"/deletecart"),{method:"DELETE",headers:{"Content-Type":"application/json",authtoken:localStorage.getItem("authtoken")},body:JSON.stringify({product_id:t})});if(!e.ok)throw new Error("Failed to delete item from cart");return"success"===(await e.json()).status?{status:"success",message:"Item deleted from cart successfully"}:{status:"error",message:"Error deleting item from cart"}}catch(e){return console.error("Error during item deletion from cart:",e),{status:"error",message:"Something went wrong!"}}},i=async(t,e)=>{try{const r=await fetch("".concat(o,"/putcart"),{method:"PUT",headers:{"Content-Type":"application/json",authtoken:localStorage.getItem("authtoken")},body:JSON.stringify({product_id:t,quantity:e})});return"success"===(await r.json()).status?{status:"success",message:"Cart item updated successfully"}:{status:"error",message:"Error updating item in cart"}}catch(r){return console.error("Error during cart item update:",r),{status:"error",message:"Something went wrong!"}}},d=async t=>{try{const e=await fetch("".concat(o,"/bulkpostcart"),{method:"POST",headers:{"Content-Type":"application/json",authtoken:localStorage.getItem("authtoken")},body:JSON.stringify({cartItems:t})});if(!e.ok)throw new Error("Failed to merge cart items");return"success"===(await e.json()).status?{status:"success",message:"Cart items merged successfully"}:{status:"error",message:"Error merging cart items"}}catch(e){return console.error("Error during cart item merge:",e),{status:"error",message:"Something went wrong!"}}}},3336:(t,e,r)=>{r.d(e,{Yi:()=>c,co:()=>a,mv:()=>s});var n=r(5280);const o="".concat(n.yK,"/order"),a=async()=>{try{const t=await fetch("".concat(o,"/getorder"),{method:"GET",headers:{"Content-Type":"application/json",authtoken:localStorage.getItem("authtoken")}});if(!t.ok)throw new Error("Failed to fetch order data");return(await t.json()).data}catch(t){return console.error("Error during order data fetch:",t),{status:"error",message:"Something went wrong!"}}},s=async()=>{try{const t=await fetch("".concat(o,"/postorder"),{method:"POST",headers:{"Content-Type":"application/json",authtoken:localStorage.getItem("authtoken")}});if(!t.ok)throw new Error("Failed to create a new order");const e=await t.json();return"success"===e.status?{status:"success",message:"New order created successfully",orderId:e.orderId}:{status:"error",message:"Error creating a new order"}}catch(t){return console.error("Error during new order creation:",t),{status:"error",message:"Something went wrong!"}}},c=async t=>{try{const e=await fetch("".concat(o,"/orderbyid/").concat(t),{method:"GET",headers:{"Content-Type":"application/json",authtoken:localStorage.getItem("authtoken")}});if(!e.ok)throw new Error("Failed to fetch order data");return(await e.json()).data}catch(e){return console.error("Error during order data fetch:",e),{status:"error",message:"Something went wrong!"}}}},5280:(t,e,r)=>{r.d(e,{Ii:()=>c,ON:()=>d,o2:()=>i,yK:()=>n});const n="".concat("","/api"),o=(t,e,r)=>{for(let n=0;n<t.length;n++){if(t[n][e]===r)return!0}return!1},a=(t,e)=>{const r=[];return[...t,...e].forEach((t=>{o(r,"product_id",t.product_id)||r.push(t)})),r},s=(t,e)=>{const r=[];return e.forEach((e=>{o(t,"product_id",e.product_id)||r.push(e)})),r},c=(t,e)=>({union:a(t,e),difference:s(t,e)}),i=(t,e,r)=>{for(let n=0;n<t.length;n++){if(t[n][e]===r)return n}return-1},d=t=>{let e=0;for(let r=0;r<t.length;r++){const n=t[r];e+=n.quantity*n.price}return e}},8248:(t,e,r)=>{r.d(e,{Z:()=>h});var n,o=r(168),a=r(2791),s=r(8470),c=r(4420),i=r(3892),d=r(7861),l=r(184);const u=s.ZP.div(n||(n=(0,o.Z)(["\n  display: flex;\n  margin-top: 20px;\n  margin-bottom: 20px;\n  align-items: center;\n\n  .image {\n    object-fit: contain;\n    width: 180px;\n    height: 180px;\n    border-radius: 4px;\n  }\n\n  .info {\n    padding-left: 20px;\n\n    .title {\n      font-size: 17px;\n      font-weight: 800;\n      margin-bottom: 5px;\n    }\n\n    .price {\n      font-size: 16px;\n      margin-bottom: 10px;\n\n      small {\n        font-size: 80%;\n      }\n\n      strong {\n        margin-left: 5px;\n      }\n    }\n\n    .quantity {\n      display: flex;\n      flex-direction: column;\n      align-items: left;\n      margin-bottom: 10px;\n\n      label {\n        font-weight: 600;\n        margin-bottom: 5px;\n      }\n\n      select {\n        padding: 5px;\n        border: none;\n        border-radius: 4px;\n        font-size: 16px;\n        width: 55px;\n      }\n    }\n\n    button {\n      background-color: #f0c14b;\n      border: 1px solid;\n      border-color: #a88734 #9c7e31 #846a29;\n      color: #111;\n      cursor: pointer;\n      transition: background-color 0.3s ease;\n\n      &:hover {\n        background-color: #ddb347;\n      }\n    }\n  }\n"]))),h=t=>{const{product_id:e,image:r,title:n,price:o,hideButton:s,quantity:h}=t,[m,g]=(0,a.useState)(h),p=(0,c.I0)(),f=localStorage.getItem("authtoken");(0,a.useEffect)((()=>{(async()=>{f&&await(0,d.ts)(e,m),p((0,i.Vj)({info:{product_id:e,quantity:m}}))})()}),[m]);return(0,l.jsxs)(u,{children:[(0,l.jsx)("img",{src:r,alt:"",className:"image"}),(0,l.jsxs)("div",{className:"info",children:[(0,l.jsx)("p",{className:"title",children:n}),(0,l.jsxs)("p",{className:"price",children:[(0,l.jsx)("small",{children:"$"}),(0,l.jsx)("strong",{children:o})]}),!s&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"quantity",children:[(0,l.jsx)("label",{htmlFor:"quantity",children:"Quantity:"}),(0,l.jsx)("select",{value:m,onChange:t=>{const e=parseInt(t.target.value);g(e)},children:Array.from({length:14},((t,e)=>(0,l.jsx)("option",{value:e+1,children:e+1},e+1)))})]}),(0,l.jsx)("button",{onClick:async t=>{f&&await(0,d.XF)(e,t.target.value),p((0,i.ul)({info:{product_id:e}}))},children:"Remove from Cart"})]})]})]})}},8207:(t,e,r)=>{r.r(e),r.d(e,{default:()=>f});var n,o=r(168),a=r(2791),s=r(8470),c=r(7689),i=r(1087),d=r(4420),l=r(8248),u=r(5280),h=r(3336),m=r(3892),g=r(184);const p=s.ZP.div(n||(n=(0,o.Z)(["\n  background-color: white;\n\n  .container {\n    h1 {\n      text-align: center;\n      padding: 10px;\n      font-weight: 400;\n      background-color: rgb(234, 237, 237);\n      border-bottom: 1px solid lightgray;\n      a {\n        text-decoration: none;\n        color: black;\n      }\n    }\n    .section {\n      display: flex;\n      padding: 20px;\n      margin: 0 20px;\n      border-bottom: 1px solid lightgray;\n\n      .title {\n        flex: 0.2;\n      }\n\n      .address,\n      .items,\n      .details {\n        flex: 0.8;\n      }\n      .details {\n        h3 {\n          padding-bottom: 21px;\n        }\n        form > div > button {\n          background: #f0c14b;\n          border-radius: 2px;\n          width: 100%;\n          height: 30px;\n          border: 1px solid;\n          font-weight: bolder;\n          margin-top: 10px;\n          border-color: #a88734 #9c7e31 #846a29;\n          color: #111;\n          max-width: 222px;\n        }\n      }\n    }\n  }\n"]))),f=()=>{const t=(0,c.s0)(),e=(0,d.I0)(),r=localStorage.getItem("authtoken");(0,a.useEffect)((()=>{r||t("/")}),[r,t]);const n=(0,d.v9)((t=>t.cart)),o=n.length,s=(0,d.v9)((t=>t.address)),f=(0,u.ON)(n),x=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(f);return(0,g.jsx)(p,{children:(0,g.jsxs)("div",{className:"container",children:[(0,g.jsxs)("h1",{children:["Checkout (",(0,g.jsxs)(i.rU,{to:"/checkout",children:[o," items"]}),")"]}),(0,g.jsxs)("div",{className:"section",children:[(0,g.jsx)("div",{className:"title",children:(0,g.jsx)("h3",{children:"Delivery Address"})}),(0,g.jsxs)("div",{className:"address",children:[(0,g.jsx)("p",{children:s.fullName}),(0,g.jsx)("p",{children:s.Address[0]}),(0,g.jsx)("p",{children:s.Address[1]}),(0,g.jsx)("p",{children:"".concat(s.city,",").concat(s.state)}),(0,g.jsx)("p",{children:"".concat(s.Country,",").concat(s.zipCode)}),(0,g.jsxs)("p",{children:["Phone : ",s.phoneNumber]})]})]}),(0,g.jsxs)("div",{className:"section",children:[(0,g.jsx)("div",{className:"title",children:(0,g.jsx)("h3",{children:"Review items and delivery"})}),(0,g.jsx)("div",{className:"items",children:null===n||void 0===n?void 0:n.map((t=>(0,g.jsx)(l.Z,{id:t.product_id,title:t.title,image:t.image,price:t.price,rating:t.rating,quantity:t.quantity,hideButton:!0},t.product_id)))})]}),(0,g.jsxs)("div",{className:"section",children:[(0,g.jsx)("div",{className:"title",children:(0,g.jsx)("h3",{children:"Payment Method"})}),(0,g.jsx)("div",{className:"details",children:(0,g.jsx)("form",{children:(0,g.jsxs)("div",{className:"priceContainer",children:[(0,g.jsxs)("h3",{children:["Order Total: ",x]}),(0,g.jsx)("button",{onClick:async r=>{r.preventDefault();try{const r=(await(0,h.mv)(n)).orderId;r?(console.log(r),e((0,m.s9)()),t("/order/".concat(r))):console.error("Order ID not found in the response.")}catch(o){console.error("Error placing the order:",o)}},children:(0,g.jsx)("span",{children:"Buy Now"})})]})})})]})]})})}}}]);
//# sourceMappingURL=207.ef22246b.chunk.js.map